import{lightbox}from"/dist/scripts/lightbox.js";import{detailHelpers}from"/dist/scripts/portfolio-detail-helpers.js";const directions={next:"next",prev:"prev"};let els,slideTransDur;function initSlider(){els={arrows:Array.from(document.querySelectorAll(".slider__arrow")),bgs:Array.from(document.querySelectorAll(`.${detailHelpers.cssClasses.bg}`)),dots:Array.from(document.querySelectorAll(`.${detailHelpers.cssClasses.dot}`)),lightboxSlides:Array.from(lightbox.els.wrapper.querySelectorAll(`.${detailHelpers.cssClasses.slide}`)),showcaseSlider:document.querySelector("#showcaseSlider"),showcaseSlides:Array.from(document.querySelectorAll(`#showcaseSlider .${detailHelpers.cssClasses.slide}`))},slideTransDur=1e3*parseFloat(window.getComputedStyle(els.showcaseSlides[0]).getPropertyValue("transition-duration")),1<els.showcaseSlides.length&&(els.arrows.forEach(e=>e.addEventListener("click",()=>arrowHandler(e))),els.dots.forEach(e=>e.addEventListener("click",()=>dotHandler(e))))}function arrowHandler(e){var t=e.getAttribute(detailHelpers.dataAttrs.dir),e=Number(els.showcaseSlides.find(e=>e.hasAttribute(detailHelpers.dataAttrs.active)).getAttribute(detailHelpers.dataAttrs.index));let s={};t===directions.prev?s.slide=els.showcaseSlides[e-1]?[els.showcaseSlides[e-1],els.lightboxSlides[e-1]]:[els.showcaseSlides[els.showcaseSlides.length-1],els.lightboxSlides[els.showcaseSlides.length-1]]:s.slide=els.showcaseSlides[e+1]?[els.showcaseSlides[e+1],els.lightboxSlides[e+1]]:[els.showcaseSlides[0],els.lightboxSlides[0]],s.index=Number(s.slide[0].getAttribute(detailHelpers.dataAttrs.index)),s.dot=els.dots.filter(e=>e.getAttribute(detailHelpers.dataAttrs.index)==s.index),s.bg=els.bgs.filter(e=>e.getAttribute(detailHelpers.dataAttrs.index)==s.index),moveSlides(s)}function dotHandler(t){let s={dot:els.dots.filter(e=>e.getAttribute(detailHelpers.dataAttrs.index)==t.getAttribute(detailHelpers.dataAttrs.index))};s.index=Number(t.getAttribute(detailHelpers.dataAttrs.index)),s.slide=[...els.showcaseSlides,...els.lightboxSlides].filter(e=>e.getAttribute(detailHelpers.dataAttrs.index)==s.index),s.bg=els.bgs.filter(e=>e.getAttribute(detailHelpers.dataAttrs.index)==s.index),moveSlides(s)}function moveSlides(e){var t={bg:els.bgs.filter(e=>e.hasAttribute(detailHelpers.dataAttrs.active)),dot:els.dots.filter(e=>e.hasAttribute(detailHelpers.dataAttrs.active)),slide:[...els.showcaseSlides,...els.lightboxSlides].filter(e=>e.hasAttribute(detailHelpers.dataAttrs.active))};[...els.arrows,...els.dots].forEach(e=>e.style.pointerEvents="none"),deactivateSlide(t),activateBg(e.bg),activateSlide(e),setTimeout(()=>{[...els.arrows,...els.dots].forEach(e=>e.style.pointerEvents="")},slideTransDur)}function deactivateSlide(e){e.slide.forEach(e=>e.classList.add(detailHelpers.cssClasses.transOut)),[...e.slide,...e.dot,...e.bg].forEach(e=>{e.classList.remove(detailHelpers.cssClasses.active),e.removeAttribute(detailHelpers.dataAttrs.active)}),setTimeout(()=>{e.slide.forEach(e=>e.classList.remove(detailHelpers.cssClasses.transOut))},slideTransDur)}function activateSlide(e){[...e.dot,...e.slide].forEach(e=>{e.classList.add(detailHelpers.cssClasses.active),e.setAttribute(detailHelpers.dataAttrs.active,!0)})}function activateBg(e){e.forEach(e=>{e.classList.add(detailHelpers.cssClasses.active),e.setAttribute(detailHelpers.dataAttrs.active,!0)})}const slider={init:initSlider};export{slider};