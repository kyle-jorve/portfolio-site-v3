import{global}from"/dist/scripts/global.js";import{head}from"/dist/scripts/head.js";import{loader}from"/dist/scripts/loader.js";import{helpers}from"/dist/scripts/global-helpers.js";let data,template;function observeForIntersection(){const a={body:global.els.body,bio:document.querySelector("#bio"),bioItems:[document.querySelector("#bioContent"),document.querySelector("#bioImg")],featuredWork:document.querySelector("#featured-work")};var e={threshold:.4};const t=new IntersectionObserver(function(e,r){e.forEach(e=>{if(e.isIntersecting){for(let e=0;e<a.featuredWorkItems.length;e++){const o=a.featuredWorkItems[e];var t=100*e;setTimeout(()=>{o.classList.add(l)},t)}r.disconnect()}})},e),o=new IntersectionObserver(function(e,r){e.forEach(e=>{if(e.isIntersecting){for(let e=0;e<a.bioItems.length;e++){const o=a.bioItems[e];var t=100*e;setTimeout(()=>{o.classList.add(l)},t)}r.disconnect()}})},e),l="active";a.featuredWorkItems=[document.querySelector("#featuredHeading"),...Array.from(a.featuredWork.querySelectorAll(".portfolio__item"))],t.observe(a.featuredWork),o.observe(a.bio)}head.buildHead(global.dataLoc.home),global.fetchFn(global.dataLoc.home).then(e=>(data=e,global.fetchFn(global.dataLoc.portfolio))).then(e=>(data.portfolio.featured=e.items.filter(e=>e.featured),data.portfolio.featured=data.portfolio.featured.slice(0,data.portfolio.itemsLimit),data.portfolio.url=e.url,data.portfolio.featured.forEach(e=>e.thumbnail=e.featuredThumbnail),global.fetchFn(global.dataLoc.cv))).then(e=>{for(var t in e.bio)data.bio[t]=e.bio[t];data.bio.url=`${e.url}#resume`,template=Handlebars.templates[global.templateSources.home](data),global.els.header.insertAdjacentHTML("afterend",template)}).catch(e=>console.warn(e)).finally(()=>{loader.init(observeForIntersection)});